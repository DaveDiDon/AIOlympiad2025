/* CSS Variables for Theming */
:root {
    /* Light Theme Defaults (Keeping these as they were good) */
    --bg-primary: #f0f4f8; /* Light Gray */
    --bg-secondary: #ffffff; /* White */
    --bg-section: #f8fafc; /* Slate-50 */
    --text-primary: #334155; /* Slate-700 */
    --text-secondary: #475569; /* Slate-600 */
    --text-header: #1e293b; /* Slate-800 */
    --text-accent: #4f46e5; /* Indigo-600 */
    --border-color: #e2e8f0; /* Gray-200 */
    --shadow-color-light: rgba(0, 0, 0, 0.1);
    --shadow-color-dark: rgba(0, 0, 0, 0.05);
    --shadow-inset-color: rgba(0, 0, 0, 0.06);

    /* Chart Colors */
    --chart-bar-songs: #60a5fa; /* Blue-400 */
    --chart-bar-songs-hover: #3b82f6; /* Blue-500 */
    --chart-bar-energy: #f87171; /* Red-400 */
    --chart-bar-energy-hover: #ef4444; /* Red-500 */
    --chart-bar-histogram: #8a2be2; /* BlueViolet */
    --chart-bar-histogram-hover: #6a0dad; /* Darker BlueViolet */
    --chart-axis-text: #475569; /* Slate-600 */
    --chart-grid: #cbd5e1; /* Slate-300 */

    /* Info Box Colors */
    --info-bg-green: #ecfdf5; /* Green-50 */
    --info-border-green: #a7f3d0; /* Green-200 */
    --info-text-green: #047857; /* Green-700 */
    --info-bg-yellow: #fffdf0; /* Yellow-50 */
    --info-border-yellow: #fde68a; /* Yellow-200 */
    --info-text-yellow: #b45309; /* Yellow-700 */
    --info-bg-purple: #f5f3ff; /* Purple-50 */
    --info-border-purple: #d8b4fe; /* Purple-200 */
    --info-text-purple: #7e22ce; /* Purple-700 */

    /* Button Colors */
    --btn-primary-bg: #2563eb; /* Blue-600 */
    --btn-primary-hover-bg: #1d4ed8; /* Blue-700 */
    --btn-danger-bg: #dc2626; /* Red-600 */
    --btn-danger-hover-bg: #b91c1c; /* Red-700 */
    --btn-secondary-bg: #d1d5db; /* Gray-300 */
    --btn-secondary-text: #374151; /* Gray-800 */
    --btn-secondary-hover-bg: #9ca3af; /* Gray-400 */

    /* Input/Table Colors */
    --input-border: #d1d5db; /* Gray-300 */
    --input-focus-ring: #3b82f6; /* Blue-500 */
    --table-header-bg: #e2e8f0; /* Gray-200 */
    --table-border: #e2e8f0; /* Gray-200 */
    --table-row-even-bg: #f8fafc; /* Slate-50 */

    /* Message Colors */
    --error-text: #dc2626; /* Red-600 */
    --upload-success-text: #16a34a; /* Green-600 */
}

/* Dark Mode Overrides - REVISED BASED ON PROVIDED PALETTE */
body.dark {
    --bg-primary: #092a44; /* Dark Blue from palette */
    --bg-secondary: #1a3a5f; /* Slightly lighter dark blue for main containers */
    --bg-section: #0f3050; /* Another shade for sections, between primary and secondary */
    --text-primary: #e0f2fe; /* Very light blue for primary text */
    --text-secondary: #a7cde9; /* Lighter blue from palette for secondary text */
    --text-header: #72b7e3; /* Blue from palette for headers */
    --text-accent: #87cdfe; /* Brightest blue from palette for accent */
    --border-color: #2c4d6f; /* A darker border color */
    --shadow-color-light: rgba(0, 0, 0, 0.4); /* Darker shadows for depth */
    --shadow-color-dark: rgba(0, 0, 0, 0.2);
    --shadow-inset-color: rgba(0, 0, 0, 0.25);

    /* Chart Colors - Adjusted to work with new blue palette */
    --chart-bar-songs: #72b7e3; /* Use a palette blue */
    --chart-bar-songs-hover: #87cdfe; /* Lighter palette blue for hover */
    --chart-bar-energy: #f87171; /* Keep red for energy as a contrast */
    --chart-bar-energy-hover: #ef4444;
    --chart-bar-histogram: #a7cde9; /* Another palette blue for histogram */
    --chart-bar-histogram-hover: #c9e1f4; /* Lighter palette blue for hover */
    --chart-axis-text: #c9e1f4; /* Lightest blue for axis text */
    --chart-grid: #2c4d6f; /* Darker grid lines */

    /* Info Box Colors - Adjusting for dark mode readability and consistency */
    --info-bg-green: #0f4a3a; /* Darker green background */
    --info-border-green: #38a169; /* Green border */
    --info-text-green: #9ae6b4; /* Lighter green text */
    --info-bg-yellow: #5c440a; /* Darker yellow background */
    --info-border-yellow: #d69e2e; /* Yellow border */
    --info-text-yellow: #f6ad55; /* Lighter yellow text */
    --info-bg-purple: #3a245d; /* Darker purple background */
    --info-border-purple: #805ad5; /* Purple border */
    --info-text-purple: #d6bcfa; /* Lighter purple text */

    /* Button Colors */
    --btn-primary-bg: #72b7e3; /* Primary button uses a palette blue */
    --btn-primary-hover-bg: #87cdfe; /* Lighter palette blue for hover */
    --btn-danger-bg: #ef4444; /* Red */
    --btn-danger-hover-bg: #dc2626; /* Darker Red */
    --btn-secondary-bg: #2c4d6f; /* Secondary button uses a dark blue */
    --btn-secondary-text: #e0f2fe; /* Light text on secondary button */
    --btn-secondary-hover-bg: #3b608a; /* Slightly lighter dark blue for hover */

    /* Input/Table Colors */
    --input-border: #3b608a; /* Input border matches other dark blues */
    --input-focus-ring: #87cdfe; /* Accent blue for focus ring */
    --table-header-bg: #1a3a5f; /* Table header matches secondary background */
    --table-border: #2c4d6f; /* Table border matches main border color */
    --table-row-even-bg: #0f3050; /* Darker background for even rows - NO MORE BLINDING WHITE */
}

/* Apply CSS Variables */
body {
    font-family: 'Red Hat Display', sans-serif;
    background-color: var(--bg-primary);
    color: var(--text-primary);
    transition: background-color 0.3s ease, color 0.3s ease;
}
.container {
    background-color: var(--bg-secondary);
    border-radius: 1.5rem; /* rounded-3xl - More rounded */
    box-shadow: 0 10px 15px -3px var(--shadow-color-light), 0 4px 6px -2px var(--shadow-color-dark);
}
h1, h2, h3 {
    color: var(--text-header);
    font-family: 'Red Hat Display', sans-serif;
}
h1 {
    color: var(--text-accent);
}
h2 {
    color: var(--text-accent);
}
.chart-container-wrapper, .data-section-wrapper {
    background-color: var(--bg-section);
    border-radius: 1.5rem; /* rounded-3xl - More rounded */
    box-shadow: inset 0 2px 4px 0 var(--shadow-inset-color);
    padding: 1.5rem;
    margin-bottom: 2.5rem;
}
.bar-songs {
    fill: var(--chart-bar-songs);
}
.bar-songs:hover {
    fill: var(--chart-bar-songs-hover);
}
.bar-energy {
    fill: var(--chart-bar-energy);
}
.bar-energy:hover {
    fill: var(--chart-bar-energy-hover);
}
.bar-histogram {
    fill: var(--chart-bar-histogram);
}
.bar-histogram:hover {
    fill: var(--chart-bar-histogram-hover);
}
.axis text {
    fill: var(--chart-axis-text);
}
.axis line, .axis path {
    stroke: var(--chart-grid);
}
.input-field {
    border-color: var(--input-border);
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    border-radius: 0.75rem; /* rounded-xl - More rounded */
    padding: 0.75rem 1rem;
}
.input-field:focus {
    outline: none;
    box-shadow: 0 0 0 3px var(--input-focus-ring);
}
.btn-primary, .btn-danger, .btn-secondary {
    border-radius: 0.75rem; /* rounded-xl - More rounded */
    padding: 0.75rem 1.5rem;
    font-weight: 500;
    transition: background-color 0.2s ease, transform 0.1s ease;
}
.btn-primary {
    background-color: var(--btn-primary-bg);
    color: white;
}
.btn-primary:hover {
    background-color: var(--btn-primary-hover-bg);
    transform: translateY(-1px);
}
.btn-danger {
    background-color: var(--btn-danger-bg);
    color: white;
}
.btn-danger:hover {
    background-color: var(--btn-danger-hover-bg);
    transform: translateY(-1px);
}
.btn-secondary {
    background-color: var(--btn-secondary-bg);
    color: var(--btn-secondary-text);
}
.btn-secondary:hover {
    background-color: var(--btn-secondary-hover-bg);
    transform: translateY(-1px);
}
table {
    border-collapse: separate;
    border-spacing: 0;
    border-color: var(--table-border);
    border-radius: 0.75rem; /* rounded-xl - More rounded */
    overflow: hidden;
    width: 100%;
}
th, td {
    border-bottom: 1px solid var(--table-border);
    padding: 1rem 1.25rem;
    color: var(--text-primary);
    text-align: left;
}
th {
    background-color: var(--table-header-bg);
    font-weight: 600;
    color: var(--text-header);
}
tr:nth-child(even) {
    background-color: var(--table-row-even-bg);
}
tr:last-child td {
    border-bottom: none;
}
.text-red-600 {
    color: var(--error-text);
}
.text-green-600 {
    color: var(--upload-success-text);
}

/* Info Box Specifics */
.p-6.bg-green-50, .p-6.bg-yellow-50, .p-6.bg-purple-50 {
    border-radius: 1rem;
    border-width: 1px;
}
.p-6.bg-green-50 { background-color: var(--info-bg-green); border-color: var(--info-border-green); }
.p-6.bg-green-50 .text-green-700 { color: var(--info-text-green); }
.p-6.bg-yellow-50 { background-color: var(--info-bg-yellow); border-color: var(--info-border-yellow); }
.p-6.bg-yellow-50 .text-yellow-700 { color: var(--info-text-yellow); }
.p-6.bg-purple-50 { background-color: var(--info-bg-purple); border-color: var(--info-border-purple); }
.p-6.bg-purple-50 .text-purple-700 { color: var(--info-text-purple); }
.text-gray-600, .text-gray-500, .text-gray-800, .text-gray-700 {
    color: var(--text-secondary);
}
.text-gray-800 {
    color: var(--text-primary);
}
.text-gray-700 {
    color: var(--text-header);
}


/* Sticky Dark Mode Toggle Button - REVISED POSITIONING */
#darkModeToggle {
    position: fixed; /* Keep it fixed */
    bottom: 2rem; /* Position from bottom */
    right: 2rem; /* Position from right */
    top: auto; /* Remove top positioning */
    left: auto; /* Remove left positioning */
    z-index: 1000;
    width: 3.5rem;
    height: 3.5rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 6px -1px var(--shadow-color-light), 0 2px 4px -1px var(--shadow-color-dark); /* Use themed shadows */
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.2s ease, color 0.3s ease;
    background-color: var(--btn-secondary-bg);
    color: var(--btn-secondary-text);
}
#darkModeToggle:hover {
    background-color: var(--btn-secondary-hover-bg);
    transform: translateY(-2px);
}
#darkModeToggle svg {
    width: 1.75rem;
    height: 1.75rem;
}

/* Icon toggling */
body.dark .sun-icon {
    display: block;
}
body.dark .moon-icon {
    display: none;
}
body:not(.dark) .sun-icon {
    display: none;
}
body:not(.dark) .moon-icon {
    display: block;
}
