/* CSS Variables for Theming */
:root {
    /* Light Theme Defaults - Adjusted slightly to incorporate more of the palette for consistency */
    --bg-primary: #f0f4f8; /* Very Light Gray, almost white */
    --bg-secondary: #ffffff; /* Pure White */
    --bg-section: #e0f2fe; /* Lightest blue from palette: for sections/cards */
    --text-primary: #092a44; /* Dark Blue from palette for primary text */
    --text-secondary: #2c4d6f; /* Slightly lighter dark blue for secondary text */
    --text-header: #092a44; /* Dark Blue for headers */
    --text-accent: #72b7e3; /* Mid blue from palette for accent */
    --border-color: #c9e1f4; /* Light blue from palette for borders */
    --shadow-color-light: rgba(0, 0, 0, 0.1);
    --shadow-color-dark: rgba(0, 0, 0, 0.05);
    --shadow-inset-color: rgba(0, 0, 0, 0.06);

    /* Chart Colors - Using blues from the palette for light theme */
    --chart-bar-songs: #72b7e3; /* Mid blue */
    --chart-bar-songs-hover: #87cdfe; /* Lighter blue for hover */
    --chart-bar-energy: #f87171; /* Keep red for energy as a contrast */
    --chart-bar-energy-hover: #ef4444;
    --chart-bar-histogram: #a7cde9; /* Another mid blue */
    --chart-bar-histogram-hover: #c9e1f4; /* Lighter blue for hover */
    --chart-axis-text: #092a44; /* Dark blue for axis text */
    --chart-grid: #c9e1f4; /* Light blue for grid */

    /* Info Box Colors (keeping vibrant for light theme) */
    --info-bg-green: #ecfdf5; /* Green-50 */
    --info-border-green: #a7f3d0; /* Green-200 */
    --info-text-green: #047857; /* Green-700 */
    --info-bg-yellow: #fffdf0; /* Yellow-50 */
    --info-border-yellow: #fde68a; /* Yellow-200 */
    --info-text-yellow: #b45309; /* Yellow-700 */
    --info-bg-purple: #f5f3ff; /* Purple-50 */
    --info-border-purple: #d8b4fe; /* Purple-200 */
    --info-text-purple: #7e22ce; /* Purple-700 */

    /* Button Colors */
    --btn-primary-bg: #72b7e3; /* Primary button uses a palette blue */
    --btn-primary-hover-bg: #87cdfe; /* Lighter palette blue for hover */
    --btn-danger-bg: #ef4444; /* Red */
    --btn-danger-hover-bg: #dc2626; /* Darker Red */
    --btn-secondary-bg: #c9e1f4; /* Secondary button uses a light blue */
    --btn-secondary-text: #092a44; /* Dark text on secondary button */
    --btn-secondary-hover-bg: #a7cde9; /* Slightly darker light blue for hover */

    /* Input/Table Colors */
    --input-border: #a7cde9; /* Input border from palette */
    --input-focus-ring: #72b7e3; /* Accent blue for focus ring */
    --table-header-bg: #c9e1f4; /* Table header from palette */
    --table-border: #a7cde9; /* Table border from palette */
    --table-row-even-bg: #e0f2fe; /* Lightest blue from palette for even rows */

    /* Message Colors */
    --error-text: #dc2626; /* Red-600 */
    --upload-success-text: #16a34a; /* Green-600 */
}

/* Dark Mode Overrides - REVISED BASED ON PROVIDED PALETTE AND CONTRAST */
body.dark {
    --bg-primary: #092a44; /* Dark Blue from palette */
    --bg-secondary: #123456; /* Slightly lighter dark blue for main containers (new shade) */
    --bg-section: #0b2238; /* Even darker blue for sections/cards (new shade) */
    --text-primary: #e0f2fe; /* Very light blue for primary text (good contrast) */
    --text-secondary: #a7cde9; /* Lighter blue from palette for secondary text (good contrast) */
    --text-header: #72b7e3; /* Mid blue from palette for headers (good contrast) */
    --text-accent: #87cdfe; /* Brightest blue from palette for accent */
    --border-color: #2c4d6f; /* A darker border color for separation */
    --shadow-color-light: rgba(0, 0, 0, 0.4); /* Darker shadows for depth */
    --shadow-color-dark: rgba(0, 0, 0, 0.2);
    --shadow-inset-color: rgba(0, 0, 0, 0.35); /* Increased inset shadow visibility */

    /* Chart Colors - Adjusted to work with new blue palette for dark mode */
    --chart-bar-songs: #72b7e3; /* Mid blue, visible on dark background */
    --chart-bar-songs-hover: #87cdfe; /* Lighter blue for hover */
    --chart-bar-energy: #f87171; /* Keep red, ensuring it's vibrant */
    --chart-bar-energy-hover: #ef4444;
    --chart-bar-histogram: #a7cde9; /* Another mid blue for histogram */
    --chart-bar-histogram-hover: #c9e1f4; /* Lighter blue for hover */
    --chart-axis-text: #c9e1f4; /* Lightest blue for axis text */
    --chart-grid: #2c4d6f; /* Darker grid lines, but visible */

    /* Info Box Colors - Consistent dark mode look */
    --info-bg-green: #0d382d; /* Darker green background */
    --info-border-green: #1a6e4d; /* Green border */
    --info-text-green: #6ee7b7; /* Lighter green text */
    --info-bg-yellow: #4d3a0d; /* Darker yellow background */
    --info-border-yellow: #9d7d1e; /* Yellow border */
    --info-text-yellow: #eab308; /* Lighter yellow text */
    --info-bg-purple: #351c4e; /* Darker purple background */
    --info-border-purple: #6a3abf; /* Purple border */
    --info-text-purple: #c084fc; /* Lighter purple text */

    /* Button Colors */
    --btn-primary-bg: #72b7e3; /* Primary button uses a palette blue */
    --btn-primary-hover-bg: #87cdfe; /* Lighter palette blue for hover */
    --btn-danger-bg: #ef4444; /* Red */
    --btn-danger-hover-bg: #dc2626; /* Darker Red */
    --btn-secondary-bg: #2c4d6f; /* Secondary button uses a dark blue */
    --btn-secondary-text: #e0f2fe; /* Light text on secondary button */
    --btn-secondary-hover-bg: #3b608a; /* Slightly lighter dark blue for hover */

    /* Input/Table Colors */
    --input-border: #3b608a; /* Input border matches other dark blues */
    --input-focus-ring: #87cdfe; /* Accent blue for focus ring */
    --table-header-bg: #123456; /* Table header matches secondary background */
    --table-border: #2c4d6f; /* Table border matches main border color */
    --table-row-even-bg: #0b2238; /* Even row background is now distinctly dark - FIX FOR BLINDING WHITE */
    --table-row-odd-bg: #123456; /* Added explicit odd row background - ensures consistency */
}

/* Apply CSS Variables */
body {
    font-family: 'Red Hat Display', sans-serif;
    background-color: var(--bg-primary);
    color: var(--text-primary);
    transition: background-color 0.3s ease, color 0.3s ease;
}
.container {
    background-color: var(--bg-secondary);
    border-radius: 1.5rem; /* rounded-3xl - More rounded */
    box-shadow: 0 10px 15px -3px var(--shadow-color-light), 0 4px 6px -2px var(--shadow-color-dark);
    padding: 2.5rem; /* Increased padding around the container */
}
h1, h2, h3 {
    color: var(--text-header);
    font-family: 'Red Hat Display', sans-serif;
    font-weight: 600; /* Ensured headers are semi-bold */
}
h1 {
    color: var(--text-accent);
    font-size: 2.8rem; /* Slightly larger for main heading */
}
h2 {
    color: var(--text-accent); /* Main section headers use accent color */
    font-size: 2.2rem; /* Slightly larger for section headers */
}
.chart-container-wrapper, .data-section-wrapper {
    background-color: var(--bg-section);
    border-radius: 1.5rem; /* rounded-3xl - More rounded */
    box-shadow: inset 0 2px 4px 0 var(--shadow-inset-color);
    padding: 1.5rem;
    margin-bottom: 2.5rem;
}
.bar-songs {
    fill: var(--chart-bar-songs);
}
.bar-songs:hover {
    fill: var(--chart-bar-songs-hover);
}
.bar-energy {
    fill: var(--chart-bar-energy);
}
.bar-energy:hover {
    fill: var(--chart-bar-energy-hover);
}
.bar-histogram {
    fill: var(--chart-bar-histogram);
}
.bar-histogram:hover {
    fill: var(--chart-bar-histogram-hover);
}
.axis text {
    fill: var(--chart-axis-text);
}
.axis line, .axis path {
    stroke: var(--chart-grid);
    stroke-width: 0.5; /* Slightly thinner grid lines */
}
.input-field {
    border: 1px solid var(--input-border); /* Explicit border for clarity */
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    border-radius: 0.75rem; /* rounded-xl - More rounded */
    padding: 0.75rem 1rem;
}
.input-field:focus {
    outline: none;
    box-shadow: 0 0 0 3px var(--input-focus-ring);
    border-color: var(--input-focus-ring); /* Solid border on focus */
}
.btn-primary, .btn-danger, .btn-secondary {
    border-radius: 0.75rem; /* rounded-xl - More rounded */
    padding: 0.75rem 1.5rem;
    font-weight: 500;
    transition: background-color 0.2s ease, transform 0.1s ease;
    border: none; /* Ensure no default button border */
}
.btn-primary {
    background-color: var(--btn-primary-bg);
    color: white; /* White text for primary button */
}
.btn-primary:hover {
    background-color: var(--btn-primary-hover-bg);
    transform: translateY(-1px);
}
.btn-danger {
    background-color: var(--btn-danger-bg);
    color: white; /* White text for danger button */
}
.btn-danger:hover {
    background-color: var(--btn-danger-hover-bg);
    transform: translateY(-1px);
}
.btn-secondary {
    background-color: var(--btn-secondary-bg);
    color: var(--btn-secondary-text);
}
.btn-secondary:hover {
    background-color: var(--btn-secondary-hover-bg);
    transform: translateY(-1px);
}
table {
    border-collapse: separate;
    border-spacing: 0;
    border: 1px solid var(--table-border); /* Table gets a border */
    border-radius: 0.75rem; /* rounded-xl - More rounded */
    overflow: hidden;
    width: 100%;
}
th, td {
    border-bottom: 1px solid var(--table-border);
    padding: 1rem 1.25rem;
    color: var(--text-primary); /* Default text primary */
}
th {
    background-color: var(--table-header-bg);
    font-weight: 600;
    color: var(--text-header); /* Table headers use header text color */
}
tbody tr:nth-child(odd) { /* Explicitly target odd rows in tbody */
    background-color: var(--table-row-odd-bg);
}
tbody tr:nth-child(even) { /* Explicitly target even rows in tbody */
    background-color: var(--table-row-even-bg);
}
tr:last-child td {
    border-bottom: none;
}
.text-red-600 {
    color: var(--error-text);
}
.text-green-600 {
    color: var(--upload-success-text);
}

/* Info Box Specifics */
.p-6.bg-green-50, .p-6.bg-yellow-50, .p-6.bg-purple-50 {
    border-radius: 1rem;
    border-width: 1px;
}
.p-6.bg-green-50 { background-color: var(--info-bg-green); border-color: var(--info-border-green); }
.p-6.bg-green-50 .text-green-700 { color: var(--info-text-green); }
.p-6.bg-yellow-50 { background-color: var(--info-bg-yellow); border-color: var(--info-border-yellow); }
.p-6.bg-yellow-50 .text-yellow-700 { color: var(--info-text-yellow); }
.p-6.bg-purple-50 { background-color: var(--info-bg-purple); border-color: var(--info-border-purple); }
.p-6.bg-purple-50 .text-purple-700 { color: var(--info-text-purple); }
/* Adjust specific Tailwind text colors to use themed variables where appropriate */
.text-gray-600, .text-gray-500 {
    color: var(--text-secondary);
}
.text-gray-800 {
    color: var(--text-primary);
}
.text-gray-700 { /* For chart subtitles */
    color: var(--text-header);
}


/* Sticky Dark Mode Toggle Button */
#darkModeToggle {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    top: auto;
    left: auto;
    z-index: 1000;
    width: 3.5rem;
    height: 3.5rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 6px -1px var(--shadow-color-light), 0 2px 4px -1px var(--shadow-color-dark);
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.2s ease, color 0.3s ease;
    background-color: var(--btn-secondary-bg);
    color: var(--btn-secondary-text);
}
#darkModeToggle:hover {
    background-color: var(--btn-secondary-hover-bg);
    transform: translateY(-2px);
}
#darkModeToggle svg {
    width: 1.75rem;
    height: 1.75rem;
}

/* Icon toggling */
body.dark .sun-icon {
    display: block;
}
body.dark .moon-icon {
    display: none;
}
body:not(.dark) .sun-icon {
    display: none;
}
body:not(.dark) .moon-icon {
    display: block;
}
